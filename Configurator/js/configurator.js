var inputList=
[{
	"id": "1",
	"name": "Bewegung",
	"type": "input",
	"iconpath": "img/icons_min/1.png",
	"description": "Bewegung ist die positionelle Veränderung eines Objektes im Raum.",
	"content": "",
	"tags": [],
	"examples": [
		"Springen",
		"Stehen",
		"Sitzen",
		"Winken",
		"Beugen der Arme",
		"Beugen der Beine",
		"Beugen des Oberkörpers",
		"Beugen des Unterkörpers",
		"Hüftbewegungen",
		"Beugen und Strecken aller Fingerglieder",
		"Synchronisation"
	],
	"items": [
		"2",
		"5"
	]
}, {
	"id": "2",
	"name": "Geschwindigkeit",
	"type": "attribute",
	"iconpath": "",
	"description": "Geschwindigkeit beschreibt, wie schnell ein Objekt oder ein Phänomen über die Zeit seine Position verändert.",
	"content": "",
	"tags": ["speed", "v", "velocity", "schnell"],
	"examples": [],
	"items": [
		"3",
		"4"
	]
}, {
	"id": "3",
	"name": "Kamera",
	"type": "sensor",
	"iconpath": "",
	"description": "Bla bla bla",
	"content": "",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"examples": [],
	"items": []
}, {
	"id": "4",
	"name": "Speedometer",
	"type": "sensor",
	"iconpath": "",
	"description": "",
	"content": "",
	"tags": ["geschwindigkeit", "speed", "v", "radar", "schnell"],
	"examples": [],
	"items": []
}, {
	"id": "5",
	"name": "Distance",
	"type": "attribute",
	"iconpath": "",
	"description": "Distance des Fingerglieder fall name Hüftbewegungen",
	"content": "",
	"tags": ["speed", "v", "velocity", "schnell"],
	"examples": [],
	"items": ["6",
		"7"
	]
}, {
	"id": "6",
	"name": "Entfernung",
	"type": "sensor",
	"iconpath": "",
	"description": "Bla bla bla",
	"content": "",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"examples": [],
	"items": []
}, {
	"id": "7",
	"name": "Laufweite",
	"type": "sensor",
	"iconpath": "",
	"description": "",
	"content": "",
	"tags": ["geschwindigkeit", "speed", "v", "radar", "schnell"],
	"examples": [],
	"items": []
}, {
	"id": "8",
	"name": "Audio",
	"type": "input",
	"iconpath": "img/icons_min/1.png",
	"description": "Blödsinn",
	"content": "",
	"tags": [],
	"examples": ["Synchronisation"],
	"items": [
		"9"
	]
},{
	"id": "9",
	"name": "Schall",
	"type": "attribute",
	"iconpath": "",
	"description": "",
	"content": "",
	"tags": ["speed", "v", "velocity", "schnell"],
	"examples": [],
	"items": ["10", "30"
	]
}, {
	"id": "10",
	"name": "Schalldruck",
	"type": "sensor",
	"iconpath": "",
	"description": "Bla bla bla",
	"content": "",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"examples": [],
	"items": []
} , {
	"id": "30",
	"name": "Penisbär",
	"type": "sensor",
	"iconpath": "",
	"description": "Bla bla bla",
	"content": "",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"examples": [],
	"items": []
}];

var outputList=
[
	{
	"id": "11",
	"name": "Beleuchtungstechnik",
	"type": "output",
	"iconpath": "img/icons_min/1.png",
	"description": "Beleuchtungstechnik ist ganz toll. Damit kann man leuchten. Yuh ich leuchte heute auch! Carsten sitzheute liebe vor der tür",
	"content": "",
	"tags": [],
	"examples": [
		"Springen",
		"Stehen",
		"Sitzen",
		"Winken",
		"Beugen der Arme",
		"Beugen der Beine",
		"Beugen des Oberkörpers",
		"Beugen des Unterkörpers",
		"Hüftbewegungen",
		"Beugen und Strecken aller Fingerglieder",
		"Synchronisation"
	],
	"items": [
		"12"
	]
}, {
	"id": "12",
	"name": "Intensität",
	"type": "attribute",
	"iconpath": "",
	"description": "Geschwindigkeit beschreibt, wie schnell ein Objekt oder ein Phänomen über die Zeit seine Position verändert.",
	"content": "",
	"tags": ["speed", "v", "velocity", "schnell"],
	"examples": [],
	"items": ["13",
		"14"
	]
}, {
	"id": "13",
	"name": "Scheinwerfer",
	"type": "device",
	"iconpath": "",
	"description": "Bla bla bla",
	"content": "",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"examples": [],
	"items": []
}, {
	"id": "14",
	"name": "Stroboskope",
	"type": "device",
	"iconpath": "",
	"description": "",
	"content": "",
	"tags": ["geschwindigkeit", "speed", "v", "radar", "schnell"],
	"examples": [],
	"items": []
}];

var exampleList=
[{
	"id": "15",
	"name": "Alle",
	"link": "#",
	"imagepath": "img/Example_img/img-test.png",
	"description": "Makf akdfla aldlad kann der mann laufen Dramatikers Christopher Marlowe, nach italienischen Quellen, aus der Zeit des Machiavelli. das 1592 in London uraufgeführt wurde.",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"inputIds": ["1","2","3","4","5","6","7","8","9","10"],
	"outputIds": ["11","12","13","14","15"]
},
{
	"id": "16",
	"name": "Kamera",
	"link": "#",
	"imagepath": "img/Example_img/img-test.png",
	"description": "Makf akdfla aldlad kann der mann laufen Dramatikers Christopher Marlowe, nach italienischen Quellen, aus der Zeit des Machiavelli. das 1592 in London uraufgeführt wurde.",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"inputIds": ["1","2","3"],
	"outputIds": ["11","12","13","14","15"]
},
{
	"id": "17",
	"name": "Speedometer",
	"link": "#",
	"imagepath": "img/Example_img/img-test.png",
	"description": "Makf akdfla aldlad kann der mann laufen Dramatikers Christopher Marlowe, nach italienischen Quellen, aus der Zeit des Machiavelli. das 1592 in London uraufgeführt wurde.",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"inputIds": ["1","2","4"],
	"outputIds": ["11","12","13","14","15"]
},
{
	"id": "18",
	"name": "Entfernung",
	"link": "#",
	"imagepath": "img/Example_img/img-test.png",
	"description": "Makf akdfla aldlad kann der mann laufen Dramatikers Christopher Marlowe, nach italienischen Quellen, aus der Zeit des Machiavelli. das 1592 in London uraufgeführt wurde.",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"inputIds": ["1","5","6"],
	"outputIds": ["11","12","13","14","15"]
},

{
	"id": "19",
	"name": "Laufweite",
	"link": "#",
	"imagepath": "img/Example_img/img-test.png",
	"description": "Makf akdfla aldlad kann der mann laufen Dramatikers Christopher Marlowe, nach italienischen Quellen, aus der Zeit des Machiavelli. das 1592 in London uraufgeführt wurde.",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"inputIds": ["1","5","7"],
	"outputIds": ["11","12","13","14","15"]
},

{
	"id": "20",
	"name": "Schalldruck",
	"link": "#",
	"imagepath": "img/Example_img/img-test.png",
	"description": "Makf akdfla aldlad kann der mann laufen Dramatikers Christopher Marlowe, nach italienischen Quellen, aus der Zeit des Machiavelli. das 1592 in London uraufgeführt wurde.",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"inputIds": ["8","9","10"],
	"outputIds": ["11","12","13","14","15"]
},

{
	"id": "21",
	"name": "Beleuchtungstechnik",
	"link": "#",
	"imagepath": "img/Example_img/img-test.png",
	"description": "Makf akdfla aldlad kann der mann laufen Dramatikers Christopher Marlowe, nach italienischen Quellen, aus der Zeit des Machiavelli. das 1592 in London uraufgeführt wurde.",
	"tags": ["video", "auge", "optik", "camera", "cam", "vision"],
	"inputIds": ["1","2","3","4","5","6","7","8","9","10"],
	"outputIds": ["11"]
},
];

stringList="";

var selInputList = [];
var selOutputList = [];
var filteredExampleList = [];

$( document ).ready(function() 
{
	createList(inputList,"input","#inputList-container");
	createList(outputList,"output","#outputList-container");

	idSelection();
	drawExampleList();
	//myHide("#inputList-container");
	searchList();

});

function searchList()
{
	$('.search-input').bind('keyup', function (evt) 
	{
		var searchText = evt.target.value.toLowerCase();

		console.log(searchText);
		/*
		$.each( $('.example-grid-item'), function(index, child) {
			var titleText = $(this).data('title').toLowerCase().trim();
			if(titleText.indexOf(searchText) !== -1) {
				$(this).show();
				$grid.masonry('layout');
			} else {
				$(this).hide();
				$grid.masonry('layout');
			}
		});*/
	})
}

function drawExampleList()
{
	filterExampleList();
	if(filteredExampleList.length>0)
	{
		createExampleList(filteredExampleList,"#exampleList-container");
	}
	else
	{
		$("#exampleList-container").empty();
		$("#exampleList-container").append("<div class="+"example"+" ><img src="+"img/Example_img/img-test.png"+"><h4>Keine Ergebinsse</h4><p class="+"infotext"+">Leider konnten keine Ergebinsse gefunden werden.<br>Probiere es mit anderen Suchbegriffen erneut.</p></div>");
	}
}

function createExampleList(arr,appendTo)
{
	$(appendTo).empty();
	for (var i in arr)
	{
		stringList+= "<div class="+"example"+" data-id="+arr[i].id+"><img src="+arr[i].imagepath+"><h4>"+arr[i].name+"</h4><p class="+"infotext"+">"+arr[i].description+"</p><a href="+arr[i].link+" class="+"example_link"+">&#8594 mehr Informationen</a></div>";
	}
	$(appendTo).append(stringList);
	stringList="";
}

function filterExampleList()
{
	filteredExampleList=exampleList;
	filterList(selInputList,"inputIds");
	filterList(selOutputList,"outputIds");
}

function filterList(selList,attribute)
{
	for (var i in selList) {
		filteredExampleList=filteredExampleList.filter(function(e) {
			var inList = false;
			
			for (var j in e[attribute]) 
			{
				if (e[attribute][j] == selList[i]) 
				{
					inList=true;
				}
			};

			return inList;
		});
	}

	return filteredExampleList
}

function idSelection()
{
	getId("#inputList-container",selInputList,".seletion_input");
	getId("#outputList-container",selOutputList,".seletion_output");

	highlight("#inputList-container",selInputList);
	highlight("#outputList-container",selOutputList);
}

/*function myHide(mainDiv)
{
	$( ""+mainDiv+" li .selector" ).each(function( index ) 
	{
		var currentLevel = $(this).closest('ul')
		$("li p", currentLevel).slideUp(1);
		$("li ul", currentLevel).slideUp(1);
	});
}

function myopen()
{
	var newThis = $(this).parent();

	$("li p", currentLevel).slideUp(1);



	//.SlideUp(100)
}*/


function highlight(mainDiv,arr)
{
	$( ""+mainDiv+" .selector" ).each(function( index ) 
	{
		if($.inArray($(this).parent().data("id"),arr)== -1)
		{
			$(this).removeClass("highlight");
		}
		else
		{
			$(this).addClass("highlight");
		}
	});
}

function getId(mainDiv,arr,addTo)
{ 
	$(mainDiv).on("click",".selector", function(event) 
	{	
		if($.inArray($(this).parent().data("id"),arr)== -1)
		{
			arr.push($(this).parent().data("id"));
		}
		else
		{
			arr.splice( $.inArray($(this).parent().data("id"),arr) ,1 );
		}


		if($.inArray($(this).parent().parent().parent().data("id"),arr)== -1)
		{
		}
		else
		{
			arr.splice( $.inArray($(this).parent().parent().parent().data("id"),arr) ,1 );
		}

		drawExampleList();
		$( addTo).text("Ids: " +arr);
		highlight(mainDiv,arr);
    });
}

function createList(arr,startParameter,appendTo) 
{
	for (var i in arr)
	{
		if(arr[i].type == startParameter)
		{
			stringList+="<li data-id=\""+arr[i].id+"\">";
			if (arr[i].description==""&& arr[i].iconpath!="")
				{
					stringList+= "<div class=\"selector\"><img src=\""+arr[i].iconpath+"\">"+arr[i].name+"</div>";
				}

				else if (arr[i].description!="" && arr[i].iconpath!="")
				{
					stringList+= "<div class=\"selector\"><img src=\""+arr[i].iconpath+"\">"+arr[i].name+"</div>";
					stringList+= "<p class="+"p-alt"+">"+arr[i].description+"</p>"
				}

				else if (arr[i].description != "" && arr[i].iconpath=="")
				{
					stringList+= "<div class=\"selector\">"+arr[i].name+"</div>"
					stringList+= "<p>"+arr[i].description+"</p>"
				}

				else
				{
					stringList+= "<div class=\"selector\">"+arr[i].name+"</div>"
				}
			createListPart(arr,arr[i].items);
			stringList+="</li>";
		}
	}
	$(appendTo).append(stringList);
	stringList="";
}

function createListPart(arr,this_items) 
{
	for (var i in this_items)
	{
		stringList+="<ul>";

		for (var j in arr)
		{
			if(this_items[i]==arr[j].id)
			{
				stringList+="<li data-id=\""+arr[j].id+"\">";
				if (arr[i].description==""&& arr[j].iconpath!="")
				{
					stringList+= "<div class=\"selector\"><img src=\""+arr[j].iconpath+"\">"+arr[j].name+"</div>";
				}

				else if (arr[i].description!="" && arr[j].iconpath!="")
				{
					stringList+= "<div class=\"selector\"><img src=\""+arr[j].iconpath+"\">"+arr[j].name+"</div>";
					stringList+= "<p class="+"p-alt"+">"+arr[j].description+"</p>"
				}
				else if (arr[i].description != "" && arr[j].iconpath=="")
				{
					stringList+= "<div class=\"selector\">"+arr[j].name+"</div>"
					stringList+= "<p>"+arr[j].description+"</p>"
				}
				else
				{
					stringList+= "<div class=\"selector\">"+arr[j].name+"</div>"
				}
				


				if(arr[j].items.length>0)
				{
					createListPart(arr,arr[j].items);
				}

				stringList+="</li>";
			}
		}
		stringList+="</ul>";
	}
}
